<!--

 * Copyright 2023 Justin Sapun (http://www.justinsapun.com)

 * The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.

-->
<!DOCTYPE html>

<html lang="en">

<head>
  <meta charset="utf-8" />
  <link rel="apple-touch-icon" sizes="76x76" href="../../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../../assets/img/favicon.png">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
  <title>
    Justin Sapun Window Shades
  </title>
  <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0, shrink-to-fit=no'
    name='viewport' />
  <!-- Fonts and icons -->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700,200" rel="stylesheet" />
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" rel="stylesheet">
  <!-- CSS Files -->
  <link href="../../assets/css/bootstrap.min.css" rel="stylesheet" />
  <link href="../../assets/css/paper-kit.css?v=2.2.0" rel="stylesheet" />
  <link href="../../assets/css/frame.css" media="screen" rel="stylesheet" type="text/css" /> <!-- Projects CSS -->
  <link href="../../assets/css/extra.css" rel="stylesheet" type="text/css" /> <!-- Extra -->
</head>

<body class="landing-page sidebar-collapse">
  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg fixed-top navbar-transparent " color-on-scroll="300">
    <div class="container">
      <div class="navbar-translate">
        <a class="navbar-brand" href="../../index.html">
          Home
        </a>
        <button class="navbar-toggler navbar-toggler" type="button" data-toggle="collapse" data-target="#navigation"
          aria-controls="navigation-index" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-bar bar1"></span>
          <span class="navbar-toggler-bar bar2"></span>
          <span class="navbar-toggler-bar bar3"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse justify-content-end" id="navigation">
        <ul class="navbar-nav">

          <li class="nav-item">
            <a href="../engineering_projects.html" class="nav-link"><i
                class="nc-icon nc-settings-gear-65"></i>Engineering Projects</a>
          </li>
          <li class="nav-item">
            <a href="../meaningful_interests.html" class="nav-link"><i class="nc-icon nc-globe-2"></i> Meaningful
              Interests</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../../index.html#contact"><i class="nc-icon nc-circle-10"></i> Contact</a>
          </li>

          <li class="nav-item">
            <a class="nav-link" rel="tooltip" title="Connect on LinkedIn" data-placement="bottom"
              href="https://www.linkedin.com/in/justinsapun/" target="_blank">
              <i class="fa fa-linkedin-square"></i>
              <p class="d-lg-none">LinkedIn</p>
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" rel="tooltip" title="Explore my GitHub" data-placement="bottom"
              href="https://github.com/JSapun" target="_blank">
              <i class="fa fa-github-square"></i>
              <p class="d-lg-none">GitHub</p>
            </a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- End Navbar -->

  <!-- Background Photo/Title -->
  <div class="page-header page-header-xs" data-parallax="true"
    style="background-image: url('../../assets/img/window_shades_example.jpg');">
    <div class="filter"></div>
    <div class="container">
      <div class="motto text-center">
        <h1>Automatic Window Shades</h1>
      </div>
    </div>
  </div>
  <!-- End Background Photo/Title -->

  <!-- Main -->
  <div class="content">
    <div class="content-table flex-column">
      <!-- Authors -->
      <div class="flex-row">
        <div class="flex-item flex-column">
          <img class="image" src="../../assets/img/automatic_shades_remote.jpg.png">
        </div>
        <div class="flex-item flex-column">
          <p class="text text-medium bolder">
            <a target="_blank" href="https://justinsapun.com">Justin Sapun</a>, justin.sapun.th@dartmouth.edu<br>
          </p>
        </div>
      </div>
      <!-- End Authors -->
      <!-- Summary/Components -->
      <div class="flex-row">
        <div class="flex-item flex-column">
          <h5 class="text add-top-margin-large bolder">
            With advancements in smart home technology, electric window shades have been introduced into the market.
            With a price point of around $90 on Amazon per window, extending this luxury to the whole house can be
            expensive.
            My solution proposes building custom automatic electric window shades with affordable components.
          </h5>

          <h3 class="bolder">Hardware Components</h3>
          <ul>
            <li>
              <p class="bolder">2 Atmega328p microcontrollers, 16MHz crystal oscillator, 3 capacitors</p>
            </li>
            <li>
              <p class="bolder">L293d H-bridge, ds3231 Real Time Clock, 5V worm gear motor, 2 nrf24l01 transceivers,
                tm1637 LED display</p>
            </li>
            <li>
              <p class="bolder">3V battery, buttons, switches, LEDS, 3V step-down regulator</p>
            </li>
          </ul>
        </div>
      </div>
      <!-- End Summary/Components -->
      <!-- Introduction -->
      <div class="flex-row">
        <div class="flex-item flex-column">
          <h2 class="bolder" id="introduction">Introduction</h2>
          <hr>
          <p class="text bolder">
            Like most luxurious things, they aren’t necessary. In this case, it’s still not necessary but I thought it
            would be
            fun to build and helpful when in use. The initial design of the automatic shades was a simple controller and
            receiver
            module. The transmitter would signal up or down movements of a worm gear motor which would drive the shades
            respectively. Difficult challenges arise when implementing automatic shade movement during sunrise and
            sunset
            time frames. The main challenge is detecting the current shade position and setting boundaries. As the
            design
            was rudimentary, there was no place for microswitches or sensors to detect these boundaries. Like most
            options
            on the current market, the transmitter will be a tiny remote with power reduction methods to save battery
            life.
            As the receiver module is stationary and could be plugged into a wall socket, there was no need to optimize
            power
            consumption.
          </p>
        </div>
      </div>
      <!-- End Introduduction -->
      <!-- Implementation -->
      <div class="flex-row">
        <div class="flex-item flex-column">
          <h2 class="bolder" id="implementation">Implementation</h2>
          <hr>
          <p class="text bolder">
            The transmitter device will be a wireless remote with 3 buttons, a 3-way switch, and 3 LEDS.
            The receiver device will be a stationary box that will also drive the motor. The receiver
            assembly consists of the receiver box, the curtain rod, and the other stabilization end. By
            turning the motor, the curtain rod will rotate and either spin the curtain up or down. Below
            is a link to the GitHub repository containing all the source code, and below are more implementation
            details.</details>
          </p>
          <br />
          <div class="button-center">
            <button type="button" onclick="window.open('https://github.com/JSapun/AutoShades', '_blank');"
              class="btn btn-outline-primary btn-round">Github</button>
          </div>
          <br />
        </div>
      </div>
      <div class="flex-row">
        <div class="flex-item flex-item-stretch flex-column">
          <div class="flex-item flex-item-stretch flex-column">
            <img class="image" src="../../assets/img/driver_example_image.jpg">
          </div>
        </div>
        <div class="flex-item flex-item-stretch flex-column">
          <h6>Drivers</h6>
          <p class="text bolder">
            One of the most important developmental steps in embedded projects is creating drivers for hardware
            components.
            Using drivers allows for high-level code in the main program and easy utilization of various components
            simultaneously. In this project, I built 3 drivers for the two-wire I2C communication for the atmega328p
            microcontroller, L293d h-bridge, ds3231 RTC, and modified 2 existing drivers for the nrf24l01 transceivers,
            and the tm1637 led display. See various driver and demo files here.
          </p>
        </div>
      </div>
      <div class="flex-row">
        <div class="flex-item flex-item-stretch flex-column">
          <div class="flex-item flex-item-stretch flex-column">
            <img class="image" src="../../assets/img/power_down_image.jpg">
          </div>
        </div>
        <div class="flex-item flex-item-stretch flex-column">
          <h6>Power Consumption</h6>
          <p class="text bolder">
            As the transmitter would have to be a wireless remote, it would need a battery. As the nrf24l01 transceiver
            and
            atmega328p processor can handle 3.3V as an input, it seems a 3V lithium battery is ideal. If there was no
            consideration of power consumption, the barebones processor draws 15mA while the nrf24l01 draws 0.33mA when
            idle. For a standard 3V battery with 150mAh capacity, the device would operate for only 9.78 hours. This
            isn’t
            going to work. The atmega328p poses some sleep modes which could be set by changing register values, which I
            simplified in the powerDown driver. By additionally shutting off internal components in the microchip, like
            the
            analog-to-digital converter, I was ultimately able to reduce total power consumption to 17uA when not in
            use.
            The nrf24l01 chip can be shut down which can reduce its consumption to less than 1uA when not in use.
            Ultimately, a 3V
            lithium battery could theoretically result in a battery life of 347 days, almost 1 year!
          </p>
        </div>
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <div class="flex-item flex-item-stretch flex-column">
              <img class="image" src="../../assets/img/battery_gauge.jpg">
            </div>
          </div>
          <div class="flex-item flex-item-stretch flex-column">
            <h6>Battery Guage</h6>
            <p class="text bolder">
              I thought it would be helpful if the user was aware that the 3V battery was getting low. Instead of using
              an
              external voltage reader, using the atmega328p analog to digital converter, you can measure a known voltage
              (the internal 1.1V reference) using an unknown scale (the Vcc battery voltage). Unfortunately, with this
              method,
              you will need to calibrate every new chip and battery voltage.
            </p>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <div class="flex-item flex-item-stretch flex-column">
              <img class="image" src="../../assets/img/automatic_shades_wireless.jpg">
            </div>
          </div>
          <div class="flex-item flex-item-stretch flex-column">
            <h6>Connection Protocol</h6>
            <p class="text bolder">
              To ensure connection between the two devices, I created a brief connection protocol. When awakened by the
              power button,
              the transmitter would send a known message to the receiver. If the receiver is within distance, it will
              then repeat
              that message back to the transmitter. If the known message is the same as the received message, the device
              flashes a
              green LED. If the receiver is not within distance or the connection is not well established, the
              transmitter will
              keep flashing the green LED. If there is no viable connection in 10 seconds or no button is pressed, the
              transmitter
              will go back to sleep. To ensure the user is aware of the connection status, the devices continuously run
              the
              connection check every so often when the transmitter is awake.
            </p>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <div class="flex-item flex-item-stretch flex-column">
              <img class="image" src="../../assets/img/automatic_shades_motor.jpg">
            </div>
          </div>
          <div class="flex-item flex-item-stretch flex-column">
            <h6>Shade Position Detection</h6>
            <p class="text bolder">
              Instead of using physical limit switches, the receiver estimates shade position using a timer based
              counter. Every 0.1 seconds an "up" or "down" command is received from the remote, the system increments or
              decrements a counter to track shade movement. To enable this, a calibration mode lets users define the top
              and bottom bounds manually. A toggle switch on the receiver allows the user to switch between setting the
              "top" or "bottom" position. These bounds are then used to limit movement during automatic operation and
              prevent the shades from overextending in either direction.
            </p>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <div class="flex-item flex-item-stretch flex-column">
              <img class="image" src="../../assets/img/transmitter_module.png">
            </div>
          </div>
          <div class="flex-item flex-item-stretch flex-column">
            <h6>Custom PCBs</h6>
            <p class="text bolder">
              I designed custom PCBs for both the remote and receiver to minimize wiring and fit everything into compact
              enclosures. Each board was tailored for its components and layout needs. The image to the left contains
              the transmitter design.
            </p>
          </div>
        </div>
        <div class="flex-row">
          <div class="flex-item flex-item-stretch flex-column">
            <div class="flex-item flex-item-stretch flex-column">
              <video class="image" controls>
                <source src="../../assets/vids/receiver_module.mp4" type="video/mp4">
                Your browser does not support the video tag.
              </video>
            </div>
          </div>
          <div class="flex-item flex-item-stretch flex-column">
            <h6>Custom Housing Enclosures</h6>
            <p class="text bolder">
              I designed custom 3D-printed housings for both the remote transmitter and receiver. Each enclosure was
              sized to fit
              the PCB and components snugly. The exploded view to the left is the receiver module.
            </p>
          </div>
        </div>
        <!-- End Implementation -->

        <!-- Recent Developments -->
        <div class="flex-item flex-column">
          <h2 class="bolder" id="skills">Recent Developments</h2>
          <hr>
          <p class="text bolder">
            All code has been completed, tested, and verified using Arduino boards. PCBs for both the remote and
            receiver have been received, and the 3D-printed enclosures are finished. I’m currently assembling and
            programming the custom PCBs. Full testing will begin once assembly is complete.
          </p>
        </div>
        <!-- End Skills -->
        <!-- Skills -->
        <div class="flex-item flex-column">
          <h2 class="bolder" id="skills">Skills</h2>
          <hr>
          <p class="text bolder">
          <p class="text bolder">
            This project strengthened my embedded programming skills in C++, including writing custom drivers for I2C,
            SPI, and motor control. I gained hands-on experience with bare-metal microcontrollers, power management, and
            RF communication. I also designed and tested custom PCBs, created 3D-printed enclosures, and integrated
            hardware and software into a complete wireless, low-power mechatronic system.
          </p>

        </div>
      </div>
      <!-- End Skills -->
    </div>
  </div>
  <!-- End Main -->


  <!--Foot Section-->
  <footer class="footer   footer-white ">
    <div class="container">
      <div class="row">
        <div class="credits ml-auto">
          <span class="copyright">
            ©
            <script>
              document.write(new Date().getFullYear())
            </script>, Justin Sapun
          </span>
        </div>
      </div>
    </div>
  </footer>
  <!-- End Footer -->

  <!--   Core JS Files   -->
  <script src="../../assets/js/core/jquery.min.js" type="text/javascript"></script>
  <script src="../../assets/js/core/popper.min.js" type="text/javascript"></script>
  <script src="../../assets/js/core/bootstrap.min.js" type="text/javascript"></script>
  <!--  Plugin for Switches, full documentation here: http://www.jque.re/plugins/version3/bootstrap.switch/ -->
  <script src="../../assets/js/plugins/bootstrap-switch.js"></script>
  <!--  Plugin for the Sliders, full documentation here: http://refreshless.com/nouislider/ -->
  <script src="../../assets/js/plugins/nouislider.min.js" type="text/javascript"></script>
  <!--  Plugin for the DatePicker, full documentation here: https://github.com/uxsolutions/bootstrap-datepicker -->
  <script src="../../assets/js/plugins/moment.min.js"></script>
  <script src="../../assets/js/plugins/bootstrap-datepicker.js" type="text/javascript"></script>
  <!-- Control Center for Paper Kit: parallax effects, scripts for the example pages etc -->
  <script src="../../assets/js/paper-kit.js?v=2.2.0" type="text/javascript"></script>
  <!--  Google Maps Plugin    -->
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY_HERE"></script>
</body>

</html>